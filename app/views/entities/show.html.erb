<% variant_forms = @entity.names.select{|e| e['form'] != "authorized"} %>

<%= render "components/entity/entity" do %>
  <h2><%= @entity.authorized_name %></h2>

  <% unless @entity.names.select{|e| e['form'] != "authorized"}.empty? %>
    <p class="variant-forms">
      <% variant_forms.each_with_index do |name, idx| %>
        <span><%= name['name'] %></span>
        <span class="badge badge-info"><%= name['form'] %></span>
        <% if idx != variant_forms.size - 1 %>
          <br />
        <% end %>
      <% end %>
    </p>
  <% end %>

  <h3 id="bioghist">
    <% if @entity.entity_type == "person" %>Biography
    <% else %>History
    <% end %>
  </h3>
  <p><%= @entity.bioghist %></p>

  <h3 id="relationships">Relationships</h3>
  <p>We'll populate this later when the relationship model is established</p>

  <!-- probably should separate this out into a partial, eventually -->
  <div id="accordion">
    <div class="card">
      <div class="card-header" id="admin-heading">
        <h4 class="mb-0">
          <button class="btn btn-link" data-toggle="collapse" data-target="#admin-details" aria-expanded="false" aria-controls="admin-details">Administrative Details</button>
        </h4>
      </div>
      <div id="admin-details" class="collapse panel-collapse" aria-labelledby="admin-heading">
        <div class="card-body">
          <p><strong>record status</strong> <%= @entity.record_status %></p>
          <p><strong>cataloging level</strong> <%= @entity.cataloging_level %></p>
          <p><strong>cataloging language</strong> <%= @entity.cataloging_language %></p>
        </div>
      </div>
    </div>
  </div>
<% end %>
